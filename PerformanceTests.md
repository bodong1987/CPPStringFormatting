# Simple Tests
## Code
generated by ChatGPT
```C++
#include <iostream>
#include <chrono>
#include <thread>
#include <vector>
#include <cstdio>
#include <format>
#include <string>
#include <iomanip>

// 包含你的格式化库的头文件
#include <Format/Format.hpp>
#include <Format/StandardLibraryAdapter.hpp>

using namespace Formatting;

// 高精度计时器
using Clock = std::chrono::high_resolution_clock;

void test_formatting_standard_library(int iterations) {
    std::string str;
    for (int i = 0; i < iterations; ++i) {
        StandardLibrary::FormatTo(str, "{0} {1} {2}", 123, "hello", 1.23);
    }
}

void test_formatting_sprintf(int iterations) {
    char buffer[100];
    for (int i = 0; i < iterations; ++i) {
        sprintf_s(buffer, "%d %s %.2f", 123, "hello", 1.23);
    }
}

void test_formatting_std_format(int iterations) {
    std::string result;
    for (int i = 0; i < iterations; ++i) {
         result = std::format("{} {} {:.2f}", 123, "hello", 1.23);
    }
}

double run_single_thread_tests(int iterations) {
    auto start = Clock::now();
    test_formatting_standard_library(iterations);
    auto end = Clock::now();
    double standard_library_time = std::chrono::duration<double>(end - start).count();

    start = Clock::now();
    test_formatting_sprintf(iterations);
    end = Clock::now();
    double sprintf_time = std::chrono::duration<double>(end - start).count();

    start = Clock::now();
    test_formatting_std_format(iterations);
    end = Clock::now();
    double std_format_time = std::chrono::duration<double>(end - start).count();

    std::cout << std::fixed << std::setprecision(6);
    std::cout << "| Single-threaded | " << standard_library_time << " | " << sprintf_time << " | " << std_format_time << " |\n";

    return (standard_library_time + sprintf_time + std_format_time) / 3;
}

double run_multi_thread_tests(int iterations, int thread_count) {
    auto run_test = [iterations](auto test_function) {
        for (int i = 0; i < iterations; ++i) {
            test_function(1);
        }
        };

    std::vector<std::thread> threads;

    // StandardLibrary::Format
    auto start = Clock::now();
    for (int i = 0; i < thread_count; ++i) {
        threads.emplace_back(run_test, test_formatting_standard_library);
    }
    for (auto& thread : threads) {
        thread.join();
    }
    auto end = Clock::now();
    double standard_library_time = std::chrono::duration<double>(end - start).count();
    threads.clear();

    // sprintf
    start = Clock::now();
    for (int i = 0; i < thread_count; ++i) {
        threads.emplace_back(run_test, test_formatting_sprintf);
    }
    for (auto& thread : threads) {
        thread.join();
    }
    end = Clock::now();
    double sprintf_time = std::chrono::duration<double>(end - start).count();
    threads.clear();

    // std::format
    start = Clock::now();
    for (int i = 0; i < thread_count; ++i) {
        threads.emplace_back(run_test, test_formatting_std_format);
    }
    for (auto& thread : threads) {
        thread.join();
    }
    end = Clock::now();
    double std_format_time = std::chrono::duration<double>(end - start).count();
    threads.clear();

    std::cout << std::fixed << std::setprecision(6);
    std::cout << "| Multi-threaded (" << thread_count << " threads) | " << standard_library_time << " | " << sprintf_time << " | " << std_format_time << " |\n";

    return (standard_library_time + sprintf_time + std_format_time) / 3;
}

int main() {
    const int iterations = 10000000;
    const int thread_count = 4;

    std::cout << "| Test Type | StandardLibrary::Format (s) | sprintf (s) | std::format (s) |\n";
    std::cout << "|-----------|-----------------------------|-------------|-----------------|\n";

    std::cout << "Single-threaded tests:\n";
    double single_thread_avg = run_single_thread_tests(iterations);

    std::cout << "\nMulti-threaded tests:\n";
    double multi_thread_avg = run_multi_thread_tests(iterations, thread_count);

    std::cout << "\nAverage execution time (s):\n";
    std::cout << "| Test Type      | Average Time (s) |\n";
    std::cout << "|----------------|------------------|\n";
    std::cout << "| Single-threaded| " << single_thread_avg << " |\n";
    std::cout << "| Multi-threaded | " << multi_thread_avg << " |\n";

    return 0;
}
```

## Result
Single-threaded tests:  
| Test Type | StandardLibrary::FormatTo (s) | sprintf (s) | std::format (s) |
|-----------|-----------------------------|-------------|-----------------|
|           | 0.474564 | 1.545161 | 1.884267 |

Multi-threaded(4 threads) tests:

| Test Type | StandardLibrary::FormatTo (s) | sprintf (s) | std::format (s) |
|-----------|-----------------------------|-------------|-----------------|
|  | 0.474686 | 1.612409 | 1.954628 |

Average execution time (s):
| Test Type      | Average Time (s) |
|----------------|------------------|
| Single-threaded| 1.301331 |
| Multi-threaded | 1.347241 |
